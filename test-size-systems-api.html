<!DOCTYPE html>
<html>
<head>
    <title>Test Size Systems API</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #1a1a1a; color: white; }
        .container { max-width: 600px; margin: 0 auto; }
        button { padding: 10px 15px; margin: 5px; background: #4CAF50; color: white; border: none; border-radius: 5px; cursor: pointer; }
        button:hover { background: #45a049; }
        .result { margin: 10px 0; padding: 10px; background: #333; border-radius: 5px; white-space: pre-wrap; }
        .error { background: #ff4444; }
        .success { background: #4CAF50; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Test Size Systems API</h1>
        <button onclick="testSizeSystems()">Test Size Systems API</button>
        <button onclick="testSizeSystemsSearch()">Test Size Systems Search</button>
        <button onclick="testBackendHealth()">Test Backend Health</button>
        
        <div id="results"></div>
    </div>

    <script>
        const resultsDiv = document.getElementById('results');

        function addResult(title, data, isError = false) {
            const div = document.createElement('div');
            div.className = `result ${isError ? 'error' : 'success'}`;
            div.innerHTML = `<h3>${title}</h3><pre>${JSON.stringify(data, null, 2)}</pre>`;
            resultsDiv.appendChild(div);
        }

        async function testBackendHealth() {
            try {
                console.log('Testing backend health...');
                const response = await fetch('https://trebodeluxe-backend.onrender.com/api/health');
                const data = await response.json();
                addResult('Backend Health', { status: response.status, data }, response.status !== 200);
            } catch (error) {
                addResult('Backend Health Error', { error: error.message }, true);
            }
        }

        async function testSizeSystems() {
            try {
                console.log('Testing size systems...');
                const response = await fetch('https://trebodeluxe-backend.onrender.com/api/size-systems');
                const data = await response.json();
                addResult('Size Systems', { 
                    status: response.status, 
                    data,
                    count: data.sizeSystems ? data.sizeSystems.length : 0
                }, response.status !== 200);
            } catch (error) {
                addResult('Size Systems Error', { error: error.message }, true);
            }
        }

        async function testSizeSystemsSearch() {
            try {
                console.log('Testing size systems search...');
                const response = await fetch('https://trebodeluxe-backend.onrender.com/api/size-systems/search?search=test');
                const data = await response.json();
                addResult('Size Systems Search', { 
                    status: response.status, 
                    data,
                    count: data.sizeSystems ? data.sizeSystems.length : 0
                }, response.status !== 200);
            } catch (error) {
                addResult('Size Systems Search Error', { error: error.message }, true);
            }
        }

        // Auto-test on page load
        window.onload = () => {
            setTimeout(() => {
                testBackendHealth();
            }, 1000);
        };
    </script>
</body>
</html>
